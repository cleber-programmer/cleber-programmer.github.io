{"version":3,"sources":["services/getEvents.js","services/getHotels.js","services/template.js","template/cache.js","template/request.js","widgets/events/events.date.js","widgets/events/events.day.js","widgets/events/events.js","widgets/events/events.klass.js","widgets/events/events.month.js","widgets/events/events.state.js","widgets/hotel/hotel.js","widgets/hotels/hotels.close.js","widgets/hotels/hotels.js","widgets/hotels/hotels.open.js"],"names":["Rex","fetch","json","query","data","Function","document","querySelector","innerHTML","replace","split","join","cache","url","text","day","month","startDate","endDate","date","shift","atom","template","state","Event","component","attached","always","cond","test","a","getEvents","klass","events","getHotels","Hotel","id","r","el","paint","toggle","close","created","event","target","location","assign","parentNode","dataset","e","preventDefault","render","hotels"],"mappings":"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","file":"evnts.min.js","sourcesContent":["Rex('getEvents', function () {\r\n\r\n  return async function () {\r\n    return await (await fetch('http://eng.evnts.rocks/events')).json();\r\n  };\r\n\r\n});","Rex('getHotels', function () {\r\n\r\n  return async function () {\r\n    return await (await fetch('http://eng.evnts.rocks/hotels')).json();\r\n  };\r\n\r\n});","Rex('template', function () {\r\n\r\n  return function (query, data) {\r\n    return (Function(\"d\", \"var p=[];with(d){p.push('\" +\r\n      document.querySelector(query)\r\n              .innerHTML\r\n              .replace(/[\\r\\t\\n]/g, \" \")\r\n              .split(\"<%\")\r\n              .join(\"\\t\")\r\n              .replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\r\n              .replace(/\\t=(.*?)%>/g, \"',$1,'\")\r\n              .split(\"\\t\")\r\n              .join(\"');\")\r\n              .split(\"%>\")\r\n              .join(\"p.push('\")\r\n              .split(\"\\r\")\r\n              .join(\"\\\\'\")+ \"');}return p.join('');\")\r\n    )(data);\r\n  };\r\n\r\n});","Rex('template.cache', () =>\r\n\r\n  ({}));","Rex('template.request', function ({ ['template.cache']: cache }) {\r\n\r\n  return async function (url) {\r\n    return cache[url] || (cache[url] = await (await fetch(url)).text());\r\n  };\r\n\r\n});","Rex('events.date', function ({ ['events.day']: day, ['events.month']: month }) {\r\n\r\n  return function({ startDate, endDate }) {\r\n    return `${ day(startDate) }, ${ day(endDate) } de ${ month(endDate) }`;\r\n  };\r\n\r\n});","Rex('events.day', function () {\r\n\r\n  return function (date) {\r\n    return date.split('/').shift();\r\n  };\r\n\r\n});","Rex(function ({ atom, template, ['events.state']: state }) {\r\n\r\n  @atom.component('evnts-event', 'ul')\r\n  class Event {\r\n\r\n    @atom.attached\r\n    async render() {\r\n      this.innerHTML = template('#events', await state());\r\n    }\r\n\r\n  }\r\n\r\n});","Rex('events.klass', function ({ always, cond }) {\r\n\r\n  return cond(\r\n      [a => /0/.test(a), always('')]\r\n    , [a => /1/.test(a % 2), always('-odd')]\r\n    , [a => /0/.test(a % 2), always('-pair')]\r\n  );\r\n\r\n});","Rex('events.month', function () {\r\n\r\n  return function (date) {\r\n    return {\r\n        '01': 'Janeiro'\r\n      , '02': 'Fevereiro'\r\n      , '03': 'Mar√ßo'\r\n      , '04': 'Abril'\r\n      , '05': 'Maio'\r\n      , '06': 'Junho'\r\n      , '07': 'Julho'\r\n      , '08': 'Agosto'\r\n      , '09': 'Setembro'\r\n      , '10': 'Outubro'\r\n      , '11': 'Novembro'\r\n      , '12': 'Dezembro'\r\n    }[date.split('/')[1]];\r\n  };\r\n\r\n});","Rex('events.state', function ({ getEvents, ['events.date']: date, ['events.klass']: klass }) {\r\n\r\n  return async function () {\r\n    return { date, klass, events: await getEvents() };\r\n  };\r\n\r\n});","Rex(function ({ atom, getHotels }) {\r\n\r\n  @atom.component('evnts-hotel', 'main')\r\n  class Hotel {\r\n\r\n    @atom.attached\r\n    async render() {\r\n      this.innerHTML = template(await getHotels()[++query().id]);\r\n    }\r\n\r\n  }\r\n\r\n});","Rex('hotels.close', function (r) {\r\n\r\n  return function (el) {\r\n\r\n    function paint() {\r\n      return '<a class=\"event_more\" href=\"#\">Ver hoteis</a>';\r\n    }\r\n\r\n    Object.assign(paint, {\r\n      toggle(){\r\n        return el.paint = r['hotels.open'](el), el;\r\n      }\r\n    });\r\n\r\n    return paint;\r\n\r\n  };\r\n\r\n});","Rex(function ({ atom, ['hotels.close']: close }) {\r\n\r\n  @atom.component('evnts-hotels', 'section')\r\n  class Hotel {\r\n\r\n    @atom.created\r\n    build() {\r\n      this.paint = close(this);\r\n    }\r\n\r\n    @atom.attached\r\n    async render() {\r\n      this.innerHTML = await this.paint();\r\n    }\r\n\r\n    @atom.event('click', 'td')\r\n    select({ target }) {\r\n      location.assign(`./hotel.html?id=${ target.parentNode.dataset.id }`);\r\n    }\r\n\r\n    @atom.event('click', 'a')\r\n    toggle(e) {\r\n      e.preventDefault();\r\n      this.paint.toggle().render();\r\n    }\r\n    \r\n  }\r\n\r\n});","Rex('hotels.open', function (r) {\r\n\r\n  return function (el) {\r\n\r\n    async function paint() {\r\n      return r.template('#hotels', { hotels: await r.getHotels() });\r\n    }\r\n\r\n    Object.assign(paint, {\r\n      toggle(){\r\n        return el.paint = r['hotels.close'](el), el;\r\n      }\r\n    });\r\n\r\n    return paint;\r\n\r\n  };\r\n\r\n});"]}